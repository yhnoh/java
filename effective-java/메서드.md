### 매개변수가 유효한지 검사하라

- 메서드와 생성자 대부분은 입력 매개변수의 값이 특정 조건을 만족하기를 바란다. 이러한 제약조건은 메서드 몸체가 실행되기 전에 검사해야 한다.
  - ex) 인덱스 값이 음수가 아니거나, 객체 참조는 null이 아니어야 한다.
- 메서드 몸체가 시작되기전에 검사를 하여 "오류는 가능한 한 빨리 잡아야 한다."는 일반 원칙의 사례이기도 하다.

#### 매개변수를 검사를 제대로 하지 못하는 경우 발생하는 문제
- 메서드가 수행되는 중간에 모호한 예외를 던질 수 있다.
  - 개발자가 생각하지 않은 에러가 발생하는 경우
- ***메서드가 잘 수행 되었지만 잘못된 결과를 반환하거나 객체를 이상한 상태로 만들어 놓아서 알 수 없는 시점에 메서드와는 관련 없는 오류를 발생시킬 수 있다.***
  - 심지어 해당 문제는 exception으로 잡히지 않으며, 다른 부서에서 해당 문제가 발생햇다고 알려주는 경우 매우 심각한 상황이 될 수 있다.
> 때문에 public, protected 메서드는 매개변수 값이 잘못됐을 때 던지는 예외를 문서화해야 한다. (@throws 자바독 태그를 사용면 된다.)

- 자바 7에 추가된 `java.util.Objects.requireNonNull()` 메서드를 활용하여 더이상 null을 수동으로 검사하지 않아도 된다.
- public이 아닌 메서드라면 단언문을 사용해 매개변수 유효성을 검증할 수 있다.
- 메서드가 직접 사용하지는 않으나 나중에 쓰기 위해 저장하는 매개변수는 특히 더 신경 써서 검사해야 한다.
```java
    public List<String> toList(String[] array){
        //null 비교를 안할 경우 클라이언트가 리턴받은 결과를 사용하다 NullPointerException이 발생할 수 있다.
        //String[] strings = Objects.requireNonNull(array);
        return new AbstractList<>() {
            @Override
            public String get(int index) {
                return array[index];
            }

            @Override
            public int size() {
                return array.length;
            }
        };
    }

```
  - `String[] strings = Objects.requireNonNull(array);` 해당 내용을 생략할 경우 클라이언트가 List를 어디서 가져와 사용했는지 추적하기 어려워질 수 있다.

#### 메서드 몸체 실행 전에 유효성 검사를 해야하는 규칙의 예외상황
- 유효성 검사 비용이 지나치게 높거나 실용적이지 않을 때, 혹은 계산 과정에서 암묵적으로 검사가 수행될 때다.
> 이번 아이템에서 "매개변수에 제약을 두는게 좋다"고 해석해서는 안된다. 메서드는 최대한 범용적으로 설계해야 한다. 메서드가 건네받은 값으로 무언가 제대로 된 일을 할 수 있다면 매개변수 제약은 적을 수록 좋다.
